var NEngine={version:{name:"alpha 0.1",number:0.1},env:{name:"",type:"",debug:1,interval:34}};NEngine.env.BROWSER="browser";NEngine.env.MOBILE="mobile";NEngine.env.CONSOLE="console";NEngine.utils={_next_ID:0};NEngine.utils.getUID=function(){return++this._next_ID};NEngine.utils.assertSame=function(d,b){return d==b?!0:!1};
NEngine.utils.log=function(){if(NEngine.env.debug)switch(NEngine.env.type){case NEngine.env.BROWSER:try{typeof console!=="undefined"&&console&&console.log&&console.log.apply(NEngine,arguments)}catch(d){console.log(Array.prototype.join.apply(arguments,[","]))}}};NEngine.utils.getTimestamp=function(){return Math.round((new Date).getTime()/1E3)};NEngine.utils.getTimestampInMS=function(){return Math.round((new Date).getTime())};NEngine.init=function(){NEngine.env.type=NEngine.env.BROWSER;NEngine.utils.log("NEngine.init - done")}();
Function.prototype.inheritsFrom=function(d){d.constructor==Function?(this.prototype=new d,this.prototype.constructor=this,this.prototype.parent=d.prototype):(this.prototype=d,this.prototype.constructor=this,this.prototype.parent=d);return this}(function(d){function b(){}b.prototype.degree2radian=function(a){return Math.PI/180*a};b.prototype.radian2degree=function(a){return a/(Math.PI/180)};d.Angle=b}(NEngine));
(function(d){function b(a,c){this.name="Point";this.x=a;this.y=c}b.prototype.clone=function(){return new b(this.x,this.y)};b.prototype.toString=function(){return this.name+"(x:"+this.x+",y:"+this.y+")"};d.Point=b})(NEngine);
(function(d){function b(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}b.prototype.m11=1;b.prototype.m12=0;b.prototype.m21=1;b.prototype.m22=0;b.prototype.dx=0;b.prototype.dy=0;b.prototype.translate=function(a,c){a=parseFloat(a);c=parseFloat(c);this.dx+=a;this.dy+=c};b.prototype.scale=function(a,c){a=parseFloat(a);c=parseFloat(c);this.m11*=a;this.dx*=a;this.m22*=c;this.dy=this.dx*c};b.prototype.skew=function(a,c){a=parseFloat(a);c=parseFloat(c);a=a*Math.PI/180;c=c*Math.PI/180;this.append(Math.cos(c),
Math.sin(c),-Math.sin(a),Math.cos(a),0,0)};b.prototype.rotate=function(a){var a=parseFloat(a),c=Math.cos(a),a=Math.sin(a),b=this.m11,d=this.m12,e=this.m21,h=this.m22,i=this.dx,j=this.dy;this.m11=b*c-d*a;this.m12=b*a+d*c;this.m21=e*c-h*a;this.m22=e*a+h*c;this.dx=i*c-j*a;this.dy=i*a+j*c};b.prototype.invert=function(){var a=this.m11,c=this.m12,b=this.m21,d=this.m22,e=this.dx,h=this.dy,i=a*d-c*b;this.m11=d/i;this.m12=-c/i;this.m21=-b/i;this.m22=a/i;this.dx=(b*h-d*e)/i;this.dy=-(a*h-c*e)/i};b.prototype.identity=
function(){this.m11=1;this.m21=this.dx=this.m12=0;this.m22=1;this.dy=0};b.prototype.prepend=function(a,c,b,d,e,h){var a=parseFloat(a),c=parseFloat(c),b=parseFloat(b),d=parseFloat(d),e=parseFloat(e),h=parseFloat(h),i=this.m11,j=this.m12,k=this.m21,l=this.m22,m=this.dx,n=this.dy;this.m11=a*i+c*k+e*0;this.m12=a*j+c*l+e*0;this.m21=b*i+d*k+h*0;this.m22=b*j+d*l+h*0;this.dx=a*m+c*n+e*1;this.dy=b*m+d*n+h*1};b.prototype.prependMatrix2D=function(a){this.prepend(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy)};b.prototype.append=
function(a,c,b,d,e,h){var a=parseFloat(a),c=parseFloat(c),b=parseFloat(b),d=parseFloat(d),e=parseFloat(e),h=parseFloat(h),i=this.m11,j=this.m12,k=this.m21,l=this.m22,m=this.dx,n=this.dy;this.m11=i*a+j*b+m*0;this.m12=i*c+j*d+m*0;this.m21=k*a+l*b+n*0;this.m22=k*c+l*d+n*0;this.dx=i*e+j*h+m*1;this.dy=k*e+l*h+n*1};b.prototype.appendMatrix2D=function(a){this.append(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy)};b.prototype.clone=function(){var a=new b;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=
this.dx;a.dy=this.dy;return a};b.prototype.transformPoint=function(a){var c=new d.Point(a.x,a.y);c.x=this.m11*a.x+this.m21*a.y+this.dx;c.y=this.m12*a.x+this.m22*a.y+this.dy;return c};b.prototype.concat=function(a,c,b,d,e,h){return this.prepend(a,c,b,d,e,h)};b.prototype.concatMatrix2D=function(a){this.concat(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy)};b.prototype.toString=function(){return"(m11:"+this.m11+",m12:"+this.m12+",m21:"+this.m21+",m22:"+this.m22+",dx:"+this.dx+",dy:"+this.dy+")"};d.Matrix2D=b})(NEngine);
(function(d){d.Event=function(){}})(NEngine);(function(d){function b(a){this._e=a;this.keycode=a.keyCode;this.charcode=a.charCode}b.prototype._e=null;b.prototype.keycode=0;b.prototype.charcode=0;d.KeyboardEvent=b})(NEngine);(function(d){function b(a){this._e=a;this.pageX=a.pageX;this.pageY=a.pageY}b.prototype._e=null;b.prototype.pageX=0;b.prototype.pageY=0;d.MouseEvent=b})(NEngine);
(function(d){function b(){this.__displayobject_init()}b.prototype.constructor=b;b.suppressCrossDomainErrors=!1;b._hitTestCanvas=document.createElement("canvas");b._hitTestCanvas.width=b._hitTestCanvas.height=1;b._hitTestContext=b._hitTestCanvas.getContext("2d");b.prototype.id=null;b.prototype.name=null;b.prototype.x=0;b.prototype.y=0;b.prototype.width=0;b.prototype.height=0;b.prototype.scaleX=1;b.prototype.scaleY=1;b.prototype.skewX=0;b.prototype.skewY=0;b.prototype.regX=0;b.prototype.regY=0;b.prototype.rotation=
0;b.prototype._mtx=null;b.prototype.mouseX=0;b.prototype.mouseY=0;b.prototype.visible=!0;b.prototype.isFocus=!1;b.prototype.isBounds=!1;b.prototype.alpha=1;b.prototype.shadow=null;b.prototype.compositeOperation="";b.prototype.cursor=null;b.prototype.stage=null;b.prototype.parent=null;b.prototype.cacheCanvas=null;b.prototype.ignoreCache=!1;b.prototype.onClick=null;b.prototype.onMouseDown=null;b.prototype.onMouseUp=null;b.prototype.onMouseOver=null;b.prototype.onMouseMove=null;b.prototype.onMouseOut=
null;b.prototype.onKeyDown=null;b.prototype.onKeyUp=null;b.prototype.onKeyPress=null;b.prototype.__draw=function(a,c){if(c||!this.cacheCanvas)return!1;a.drawImage(this.cacheCanvas,this.x-this.regX,this.y-this.regY);return!0};b.prototype.clone=function(){var a=new b;a.name=this.name;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.skewX=this.skewX;a.skewY=this.skewY;a.regX=this.regX;a.regY=this.regY;a.rotation=this.rotation;a._mtx=this._mtx;
a.mouseX=this.mouseX;a.mouseY=this.mouseY;a.visible=this.visible;a.alpha=this.alpha;a.shadow=this.shadow;a.compositeOperation=this.compositeOperation;a.stage=this.stage;a.parent=this.parent;a.cacheCanvas=this.cacheCanvas;a.ignoreCache=this.ignoreCache;return a};b.prototype.toString=function(){return this.name+"(id:"+this.id+")"};b.prototype.debug=function(a){for(var c in a)d.utils.log(c+"="+a[c])};b.prototype.getConcatenatedMatrix=function(a){a?a.identity():a=new d.Matrix2D;for(var c=this;c!=null;)c=
c.parent;return a};b.prototype.applyShadow=function(){};b.prototype.applyStyle=function(a){if(this.fillStyle!=null)this.__fillStyle=a.fillStyle,a.fillStyle=this.fillStyle.toRGB();if(this.strokeStyle!=null)this.__strokeStyle=a.strokeStyle,a.strokeStyle=this.strokeStyle.toRGB()};b.prototype.resetStyle=function(a){if(this.__fillStyle!=null)a.fillStyle=this.__fillStyle;if(this.__strokeStyle!=null)a.strokeStyle=this.__strokeStyle};b.prototype.globalToLocal=function(a){return new Point(a-this.x,gloablY-
this.y)};b.prototype.localToGlobal=function(a,c){return new Point(a+this.x,c+this.y)};b.prototype.cache=function(){var a;if(this.cacheCanvas==null)this.cacheCanvas=document.createElement("canvas");a=this.cacheCanvas.getContext("2d");this.cacheCanvas.width=this.width;this.cacheCanvas.height=this.height;a.setTransform(1,0,0,1,-this.x,-this.y);a.clearRect(0,0,this.width+1,this.height+1);this.draw(a,!0)};b.prototype.updateCache=function(){this.cache()};b.prototype.clearCache=function(){this.cacheCanvas=
null};b.prototype.__displayobject_init=function(a){this._mtx=new d.Matrix2D;this._mtx.identity();this.id=d.utils.getUID();this.name=a};b.prototype.hitTest=function(a,c){var g=b._hitTestContext,d=b._hitTestCanvas;g.setTransform(1,0,0,1,-a,-c);this.draw(g,!0);g=this._testHit(g);d.width=0;d.width=1;return g};b.prototype._testHit=function(a){try{var c=a.getImageData(0,0,1,1).data[3]>1}catch(g){if(!b.suppressCrossDomainErrors)throw"An error has occured. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";
}return c};b.prototype.inBounds=function(a,c){return a>=this.x&&c>=this.y&&a<this.x+this.width&&c<this.y+this.height};d.DisplayObject=b})(NEngine);(function(d){function b(){}b.inheritsFrom(d.DisplayObject);b.prototype.mouseEnabled=!0;d.InteractiveObject=b})(NEngine);
(function(d){function b(){this.__displayobject_init("DisplayObjectContainter")}b.inheritsFrom(d.InteractiveObject);b.prototype._children=[];b.prototype._isdirty=!1;b.prototype.numChildren=0;b.prototype.__displayobjectcont_init=function(){this._children=[]};b.prototype.addChild=function(a){this.numChildren++;this._children.push(a);this._isdirty=!0;a.parent=this;a.stage=this};b.prototype.addChildAt=function(){throw"Exception: DisplayObjectContainer.addChildAt(child, index) not implemented";};b.prototype.contains=
function(a){for(var c=0;c<this._children.length;c++)if(this._children[c].id==a.id)return!0;return!1};b.prototype.getChildAt=function(a){return this._children[a]!=void 0?this._children[a]:null};b.prototype.getChildByName=function(){throw"Exception: DisplayObjectContainer.getChildByName(name) not implemented";};b.prototype.getChildIndex=function(a){for(var c=0;c<this._children.length;c++)if(this._children[c].id==a.id)return c;return-1};b.prototype.removeChild=function(a){for(var c=0;c<this._children.length;c++)if(this._children[c].id==
a.id)return a=this._children[c],a.parent=null,a.stage=null,this._children.splice(c,1),this._isdirty=!0,this.numChildren--,a;return null};b.prototype.removeChildAt=function(a){var c=this._children[a];c.parent=null;c.stage=null;this._children.splice(a,1);this._isdirty=!0;this.numChildren--;return c};b.prototype.setChildIndex=function(){throw"Exception: DisplayObjectContainer.setChildIndex(child, index) not implemented";};b.prototype.swapChildren=function(a,c){for(var b=-1,d=-1,e=0;e<this._children.length;e++)this._children[e].id==
a.id&&(b=e),this._children[e].id==c.id&&(d=e);b!=-1&&d!=-1&&(e=this._children[b],this._children[b]=this._children[d],this._children[d]=e)};b.prototype.swapChildrenAt=function(a,c){if(this._children[a]!=void 0&&this._children[c]!=void 0){var b=this._children[a];this._children[a]=this._children[c];this._children[c]=b}};b.prototype.getObjectsUnderPoint=function(a,c){for(var b=[],d=0;d<this._children.length;d++)this._children[d]instanceof DisplayObjectContainter||this._children[d].inBounds(a,c)&&b.push(this._children[d]);
return b};d.DisplayObjectContainer=b})(NEngine);
(function(d){function b(a){this.__displayobject_init("Sprite");this.__displayobjectcont_init();this.__stage_init(a)}b.inheritsFrom(d.DisplayObjectContainer);b.prototype.canvas=null;b.prototype.graphics=null;b.prototype.autoClear=!0;b.prototype.useHandCursor=!0;b.prototype.__stage_init=function(a){this.stage=this;this.canvas=a;this.graphics=new d.Graphics(this.canvas);var c=this;window.addEventListener?(window.addEventListener("mousemove",function(a){c._handleOnMouseMove(a)},!1),window.addEventListener("mouseup",
function(a){c._handleOnMouseUp(a)},!1),window.addEventListener("mousedown",function(a){c._handleOnMouseDown(a)},!1),window.addEventListener("mouseover",function(a){c._handleOnMouseOver(a)},!1),window.addEventListener("mouseout",function(a){c._handleOnMouseOut(a)},!1),window.addEventListener("click",function(a){c._handleOnClick(a)},!1),window.addEventListener("keydown",function(a){c._handleOnKeyDown(a)},!1),window.addEventListener("keyup",function(a){c._handleOnKeyUp(a)},!1),window.addEventListener("keypress",
function(a){c._handleOnKeyPress(a)},!1)):document.addEventListener?(document.addEventListener("mousemove",function(a){c._handleOnMouseMove(a)},!1),document.addEventListener("mouseup",function(a){c._handleOnMouseUp(a)},!1),document.addEventListener("mousedown",function(a){c._handleOnMouseDown(a)},!1),document.addEventListener("mouseover",function(a){c._handleOnMouseOver(a)},!1),document.addEventListener("mouseout",function(a){c._handleOnMouseOut(a)},!1),document.addEventListener("click",function(a){c._handleOnClick(a)},
!1),document.addEventListener("keydown",function(a){c._handleOnKeyDown(a)},!1),document.addEventListener("keyup",function(a){c._handleOnKeyUp(a)},!1),document.addEventListener("keypress",function(a){c._handleOnKeyPress(a)},!1)):window.attachEvent&&(window.attachEvent("mousemove",function(a){c._handleOnMouseMove(a)}),window.attachEvent("mouseup",function(a){c._handleOnMouseUp(a)}),window.attachEvent("mousedown",function(a){c._handleOnMouseDown(a)}),window.attachEvent("mouseover",function(a){c._handleOnMouseOver(a)}),
window.attachEvent("mouseout",function(a){c._handleOnMouseOut(a)}),window.attachEvent("click",function(a){c._handleOnClick(a)}),window.attachEvent("keydown",function(a){c._handleOnKeyDown(a)}),window.attachEvent("keyup",function(a){c._handleOnKeyUp(a)}),window.attachEvent("keypress",function(a){c._handleOnKeyPress(a)}));this.draw()};b.prototype._handleOnMouseMove=function(a){if(this.canvas){if(this.mouseX=a.pageX-this.canvas.offsetLeft,this.mouseY=a.pageY-this.canvas.offsetTop,this.mouseX>=0&&this.mouseY>=
0&&this.mouseX<this.canvas.width&&this.mouseY<this.canvas.height){if(this.onMouseMove)this.onMouseMove(a);for(var c=0;c<this._children.length;c++)if(this._children[c].mouseX=a.pageX-this.canvas.offsetLeft-this._children[c].x,this._children[c].mouseY=a.pageY-this.canvas.offsetTop-this._children[c].y,this._children[c].mouseEnabled&&this._children[c].onMouseMove&&this._children[c].onMouseMove instanceof Function)this._children[c].onMouseMove(a)}}else this.mouseX=this.mouseY=null};b.prototype._handleOnMouseUp=
function(a){if(this.canvas){this.mouseX=a.pageX-this.canvas.offsetLeft;this.mouseY=a.pageY-this.canvas.offsetTop;if(this.onMouseUp)this.onMouseUp(a);for(var c=0;c<this._children.length;c++)if(this._children[c].mouseX=a.pageX-this.canvas.offsetLeft-this._children[c].x,this._children[c].mouseY=a.pageY-this.canvas.offsetTop-this._children[c].y,this._children[c].mouseEnabled&&this._children[c].onMouseUp&&this._children[c].onMouseUp instanceof Function)this._children[c].onMouseUp(a)}else this.mouseX=this.mouseY=
null};b.prototype._handleOnMouseDown=function(a){if(this.canvas){this.mouseX=a.pageX-this.canvas.offsetLeft;this.mouseY=a.pageY-this.canvas.offsetTop;if(this.onMouseDown)this.onMouseDown(a);for(var c=0;c<this._children.length;c++)if(this._children[c].mouseX=a.pageX-this.canvas.offsetLeft-this._children[c].x,this._children[c].mouseY=a.pageY-this.canvas.offsetTop-this._children[c].y,this._children[c].mouseEnabled&&this._children[c].onMouseDown&&this._children[c].onMouseDown instanceof Function)this._children[c].onMouseDown(a)}else this.mouseX=
this.mouseY=null};b.prototype._handleOnMouseOver=function(a){if(this.canvas){this.mouseX=a.pageX-this.canvas.offsetLeft;this.mouseY=a.pageY-this.canvas.offsetTop;if(this.onMouseOver)this.onMouseOver(a);for(var c=0;c<this._children.length;c++)if(this._children[c].mouseX=a.pageX-this.canvas.offsetLeft-this._children[c].x,this._children[c].mouseY=a.pageY-this.canvas.offsetTop-this._children[c].y,this._children[c].mouseEnabled&&this._children[c].onMouseOver&&this._children[c].onMouseOver instanceof Function)this._children[c].onMouseOver(a)}else this.mouseX=
this.mouseY=null};b.prototype._handleOnMouseOut=function(a){if(this.canvas){this.mouseX=a.pageX-this.canvas.offsetLeft;this.mouseY=a.pageY-this.canvas.offsetTop;if(this.onMouseOut)this.onMouseOut(a);for(var c=0;c<this._children.length;c++)if(this._children[c].mouseX=a.pageX-this.canvas.offsetLeft-this._children[c].x,this._children[c].mouseY=a.pageY-this.canvas.offsetTop-this._children[c].y,this._children[c].mouseEnabled&&this._children[c].onMouseOut&&this._children[c].onMouseOut instanceof Function)this._children[c].onMouseOut(a)}else this.mouseX=
this.mouseY=null};b.prototype._handleOnClick=function(a){if(this.canvas){this.mouseX=a.pageX-this.canvas.offsetLeft;this.mouseY=a.pageY-this.canvas.offsetTop;if(this.onClick)this.onClick(a);for(var c=0;c<this._children.length;c++)if(this._children[c].mouseX=a.pageX-this.canvas.offsetLeft-this._children[c].x,this._children[c].mouseY=a.pageY-this.canvas.offsetTop-this._children[c].y,this._children[c].mouseEnabled&&this._children[c].inBounds(this.mouseX,this.mouseY)&&this._children[c].onClick&&this._children[c].onClick instanceof
Function)this._children[c].onClick(a)}else this.mouseX=this.mouseY=null};b.prototype._handleOnKeyDown=function(a){if(this.canvas){if(this.onKeyDown)this.onKeyDown(a);for(var c=0;c<this._children.length;c++)if(this._children[c].onKeyDown&&this._children[c].onKeyDown instanceof Function)this._children[c].onKeyDown(a)}};b.prototype._handleOnKeyUp=function(a){if(this.canvas){if(this.onKeyUp)this.onKeyUp(a);for(var c=0;c<this._children.length;c++)if(this._children[c].onKeyUp&&this._children[c].onKeyUp instanceof
Function)this._children[c].onKeyUp(a)}};b.prototype._handleOnKeyPress=function(a){if(this.canvas){if(this.onKeyPress)this.onKeyPress(a);for(var c=0;c<this._children.length;c++)if(this._children[c].onKeyPress&&this._children[c].onKeyPress instanceof Function)this._children[c].onKeyPress(a)}};b.prototype.tick=function(){this.draw()};b.prototype.clear=function(){this.canvas!=null&&this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height)};b.prototype.draw=function(){if(this.canvas!=
null){this.autoClear&&this.clear();this.animate&&this.animate();for(var a=0;a<this._children.length;a++)this._children[a].draw(this.graphics.ctx)}};b.prototype.toString=function(){return this.name+"(id:"+this.id+")"};d.Sprite=b})(NEngine);
(function(d){function b(a){this.__displayobject_init("Stage");this.__displayobjectcont_init();this.__stage_init(a);d.Clock.setInterval(d.env.interval);d.Clock.addListeners(this);d.Clock.start()}b.inheritsFrom(d.DisplayObjectContainer);b.prototype.canvas=null;b.prototype.graphics=null;b.prototype.autoClear=!0;b.prototype.__stage_init=function(a){this.stage=this;this.canvas=a;this.graphics=new d.Graphics(this.canvas);this.canvas.globalOffsetLeft=this.canvas.offsetLeft;this.canvas.globalOffsetTop=this.canvas.offsetTop;
for(a=this.canvas;a=a.offsetParent;)this.canvas.globalOffsetLeft+=a.offsetLeft,this.canvas.globalOffsetTop+=a.offsetTop;var c=this;window.addEventListener?(window.addEventListener("mousemove",function(a){c._handleOnMouseMove(a)},!1),window.addEventListener("mouseup",function(a){c._handleOnMouseUp(a)},!1),window.addEventListener("mousedown",function(a){c._handleOnMouseDown(a)},!1),window.addEventListener("click",function(a){c._handleOnClick(a)},!1),window.addEventListener("keydown",function(a){c._handleOnKeyDown(a)},
!1),window.addEventListener("keyup",function(a){c._handleOnKeyUp(a)},!1),window.addEventListener("keypress",function(a){c._handleOnKeyPress(a)},!1)):document.addEventListener?(document.addEventListener("mousemove",function(a){c._handleOnMouseMove(a)},!1),document.addEventListener("mouseup",function(a){c._handleOnMouseUp(a)},!1),document.addEventListener("mousedown",function(a){c._handleOnMouseDown(a)},!1),document.addEventListener("click",function(a){c._handleOnClick(a)},!1),document.addEventListener("keydown",
function(a){c._handleOnKeyDown(a)},!1),document.addEventListener("keyup",function(a){c._handleOnKeyUp(a)},!1),document.addEventListener("keypress",function(a){c._handleOnKeyPress(a)},!1)):window.attachEvent&&(window.attachEvent("mousemove",function(a){c._handleOnMouseMove(a)}),window.attachEvent("mouseup",function(a){c._handleOnMouseUp(a)}),window.attachEvent("mousedown",function(a){c._handleOnMouseDown(a)}),window.attachEvent("click",function(a){c._handleOnClick(a)}),window.attachEvent("keydown",
function(a){c._handleOnKeyDown(a)}),window.attachEvent("keyup",function(a){c._handleOnKeyUp(a)}),window.attachEvent("keypress",function(a){c._handleOnKeyPress(a)}));this.draw()};b.prototype._handleOnMouseMove=function(a){if(this.canvas){this.mouseX=a.pageX-this.canvas.globalOffsetLeft;this.mouseY=a.pageY-this.canvas.globalOffsetTop;var c=this.mouseX>=0&&this.mouseY>=0&&this.mouseX<this.canvas.width&&this.mouseY<this.canvas.height;if(c){if(this.onMouseMove)this.onMouseMove(a);for(var b=0;b<this._children.length;b++)if(this._children[b].mouseX=
this.mouseX-this._children[b].x,this._children[b].mouseY=this.mouseY-this._children[b].y,this._children[b].mouseEnabled){if((c=this._children[b].inBounds(this.mouseX,this.mouseY))&&this._children[b].onMouseMove&&this._children[b].onMouseMove instanceof Function)this._children[b].onMouseMove(a);var d=this._children[b].isBounds;if(d==!1&&c&&this._children[b].onMouseOver&&this._children[b].onMouseOver instanceof Function&&(this._children[b].onMouseOver(a),this._children[b].isBounds=!0,this._children[b].cursor))this.canvas.style.cursor=
this._children[b].cursor;if(d&&c==!1&&this._children[b].onMouseOut&&this._children[b].onMouseOut instanceof Function&&(this._children[b].onMouseOut(a),this._children[b].isBounds=!1,this._children[b].cursor))this.canvas.style.cursor="auto"}}}else this.mouseX=this.mouseY=null};b.prototype._handleOnMouseUp=function(a){if(this.canvas){this.mouseX=a.pageX-this.canvas.globalOffsetLeft;this.mouseY=a.pageY-this.canvas.globalOffsetTop;if(this.onMouseUp)this.onMouseUp(a);for(var b=0;b<this._children.length;b++)if(this._children[b].mouseX=
this.mouseX-this._children[b].x,this._children[b].mouseY=this.mouseY-this._children[b].y,this._children[b].mouseEnabled&&this._children[b].inBounds(this.mouseX,this.mouseY)&&this._children[b].onMouseUp&&this._children[b].onMouseUp instanceof Function)this._children[b].onMouseUp(a)}else this.mouseX=this.mouseY=null};b.prototype._handleOnMouseDown=function(a){if(this.canvas){this.mouseX=a.pageX-this.canvas.globalOffsetLeft;this.mouseY=a.pageY-this.canvas.globalOffsetTop;if(this.onMouseDown)this.onMouseDown(a);
for(var b=0;b<this._children.length;b++)if(this._children[b].mouseX=this.mouseX-this._children[b].x,this._children[b].mouseY=this.mouseY-this._children[b].y,this._children[b].mouseEnabled&&this._children[b].inBounds(this.mouseX,this.mouseY)&&this._children[b].onMouseDown&&this._children[b].onMouseDown instanceof Function)this._children[b].onMouseDown(a)}else this.mouseX=this.mouseY=null};b.prototype._handleOnMouseOver=function(a){if(this.canvas){if(this.mouseX=a.pageX-this.canvas.globalOffsetLeft,
this.mouseY=a.pageY-this.canvas.globalOffsetTop,this.onMouseOver)this.onMouseOver(a)}else this.mouseX=this.mouseY=null};b.prototype._handleOnMouseOut=function(a){if(this.canvas){if(this.mouseX=a.pageX-this.canvas.globalOffsetLeft,this.mouseY=a.pageY-this.canvas.globalOffsetTop,this.onMouseOut)this.onMouseOut(a)}else this.mouseX=this.mouseY=null};b.prototype._handleOnClick=function(a){if(this.canvas){this.mouseX=a.pageX-this.canvas.globalOffsetLeft;this.mouseY=a.pageY-this.canvas.globalOffsetTop;if(this.onClick)this.onClick(a);
for(var b=0;b<this._children.length;b++)if(this._children[b].mouseX=this.mouseX-this._children[b].x,this._children[b].mouseY=this.mouseY-this._children[b].y,this._children[b].mouseEnabled&&this._children[b].inBounds(this.mouseX,this.mouseY)&&this._children[b].onClick&&this._children[b].onClick instanceof Function)this._children[b].onClick(a)}else this.mouseX=this.mouseY=null};b.prototype._handleOnKeyDown=function(a){if(this.canvas){if(this.onKeyDown)this.onKeyDown(a);for(var b=0;b<this._children.length;b++)if(this._children[b].onKeyDown&&
this._children[b].onKeyDown instanceof Function)this._children[b].onKeyDown(a)}};b.prototype._handleOnKeyUp=function(a){if(this.canvas){if(this.onKeyUp)this.onKeyUp(a);for(var b=0;b<this._children.length;b++)if(this._children[b].onKeyUp&&this._children[b].onKeyUp instanceof Function)this._children[b].onKeyUp(a)}};b.prototype._handleOnKeyPress=function(a){if(this.canvas){if(this.onKeyPress)this.onKeyPress(a);for(var b=0;b<this._children.length;b++)if(this._children[b].onKeyPress&&this._children[b].onKeyPress instanceof
Function)this._children[b].onKeyPress(a)}};b.prototype.tick=function(){this.draw()};b.prototype.clear=function(){this.canvas!=null&&this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height)};b.prototype.draw=function(){if(this.canvas!=null){this.autoClear&&this.clear();for(var a=0;a<this._children.length;a++)if(this._children[a].animate&&this._children[a].animate(),this._children[a].visible){var b=this._children[a]._mtx.clone();this.graphics.ctx.setTransform(b.m11,b.m12,b.m21,
b.m22,b.dx,b.dy);this._children[a].rotation!=0&&(this.graphics.ctx.translate(this._children[a].x+this._children[a].regX,this._children[a].y+this._children[a].regY),this.graphics.ctx.rotate(this._children[a].rotation),this.graphics.ctx.translate(-(this._children[a].x+this._children[a].regX),-(this._children[a].y+this._children[a].regY)));this.graphics.ctx.globalAlpha=this._children[a].alpha;this.graphics.ctx.globalCompositeOperation=this._children[a].compositeOperation||"source-over";this._children[a].draw(this.graphics.ctx,
this.ignoreCache)}}};b.prototype.toString=function(){return this.name+"(id:"+this.id+")"};d.Stage=b})(NEngine);
(function(d){function b(a,b,d,f){if(a<0||a>256||a==void 0)a=0;if(b<0||b>256||b==void 0)b=0;if(d<0||d>256||d==void 0)d=0;if(f<0||f>1||f==void 0)f=1;this.r=a;this.g=b;this.b=d;this.alpha=f}b.prototype.r=0;b.prototype.g=0;b.prototype.b=0;b.prototype.alpha=1;b.prototype.clone=function(){return new b(this.r,this.g,this.b,this.alpha)};b.prototype.toRGB=function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.alpha+")"};b.prototype.toCSS=function(){return"#"+dechex(this.r)+dechex(this.g)+dechex(this.b)};
d.Color=b})(NEngine);(function(d){function b(a){this.canvas=a;this.ctx=this.canvas.getContext("2d")}b.prototype.canvas=null;b.prototype.ctx=null;b.prototype.strokeStyle=function(a){if(this.ctx!=null)return this.ctx.strokeStyle=a.toRGB(),this};b.prototype.fillStyle=function(a){if(this.ctx!=null)return this.ctx.fillStyle=a.toRGB(),this};d.Graphics=b})(NEngine);
(function(d){function b(){this.__displayobject_init("Shape")}b.inheritsFrom(d.InteractiveObject);b.prototype.filled=!1;b.prototype.fillStyle=null;b.prototype.strokeStyle=null;b.prototype.rotation=0;b.prototype.clone=function(){return new b};b.prototype.toString=function(){return this.name+"(id:"+this.id+")"};d.Shape=b})(NEngine);
(function(d){function b(a,b,d,f,e,h,i,j,k){this.__displayobject_init("Bitmap");this.x=b;this.y=d;this.regX=f/2;this.regY=e/2;if(typeof a=="string"){this.image=new Image;var l=this;this.image.onload=function(){l.ready=!0};this.image.src=a}else if(a instanceof Image)this.image=a;else throw"Exception: the first parameter is not String or Image object";if(f!=void 0)this.width=f;if(e!=void 0)this.height=e;if(h!=void 0)this.sx=h;if(i!=void 0)this.sy=i;if(j!=void 0)this.sw=j;if(k!=void 0)this.sh=k}b.inheritsFrom(d.Shape);
b.prototype.image=null;b.prototype.ready=!1;b.prototype.sx=null;b.prototype.sy=null;b.prototype.sw=null;b.prototype.sh=null;b.prototype.clone=function(){return new b(this.image.src)};b.prototype.toString=function(){return this.name+"(id:"+this.id+",imageurl:"+this.image.src+")"};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.ready&&(this.width&&this.height&&this.sx!=void 0&&this.sy!=void 0&&this.sw&&this.sh?a.drawImage(this.image,this.sx,this.sy,this.sw,this.sh,this.x,this.y,this.width,
this.height):this.width&&this.height?a.drawImage(this.image,this.x,this.y,this.width,this.height):a.drawImage(this.image,this.x,this.y))};b.prototype.inBounds=function(a,b){var d=a>=this.x&&b>=this.y&&a<this.x+this.width&&b<this.y+this.height;if(this.stage&&d)return this.stage.graphics.ctx.getImageData(a,b,1,1).data[3]/255;return d};d.Bitmap=b})(NEngine);
(function(d){function b(a,b,d,f,e){this.__displayobject_init("Rectangle");this.x=a;this.y=b;this.width=d;this.height=f;this.regX=d/2;this.regY=f/2;if(typeof e=="boolean")this.filled=e}b.inheritsFrom(d.Shape);b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height,this.filled)};b.prototype.toString=function(){return this.name+"(id:"+this.id+",x:"+this.x+",y:"+this.y+",w:"+this.width+",h:"+this.height+")"};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.applyStyle(a);
this.filled?a.fillRect(this.x,this.y,this.width,this.height):a.strokeRect(this.x,this.y,this.width,this.height);this.resetStyle(a)};b.prototype.inBounds=function(a,b){return a>=this.x&&b>=this.y&&a<this.x+this.width&&b<this.y+this.height};d.Rectangle=b})(NEngine);
(function(d){function b(a,b,d,f){this.__displayobject_init("Circle");this.x=a;this.y=b;this.radius=d;this.regY=this.regX=0;if(typeof f=="boolean")this.filled=f}b.inheritsFrom(d.Shape);b.prototype.radius=0;b.prototype.clone=function(){return new b(this.x,this.y,this.r,this.filled)};b.prototype.toString=function(){return this.name+"(id:"+this.id+",x:"+this.x+",y:"+this.y+",r:"+this.radius+")"};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.applyStyle(a);a.beginPath();a.arc(this.x,
this.y,this.radius,(new d.Angle).degree2radian(0),(new d.Angle).degree2radian(360),!0);this.filled?a.fill():a.stroke();this.resetStyle(a)};b.prototype.inBounds=function(){return!1};d.Circle=b})(NEngine);
(function(d){function b(a,b,d,f){this.__displayobject_init("StaticText");this.x=a;this.y=b;this.regY=this.regX=0;this.text=d;if(typeof f=="boolean")this.filled=f}b.inheritsFrom(d.Shape);b.prototype.text=null;b.prototype.font="12pt Times New Roman";b.prototype.textAlign="left";b.prototype.textBaseline="bottom";b.prototype.maxWidth=0;b.prototype.clone=function(){var a=new b(this.x,this.y,this.text,this.filled);a.font=this.font;a.textAlign=this.textAlign;a.textBaseline=this.textBaseline;a.maxWidth=this.maxWidth;
return a};b.prototype.toString=function(){return this.name+"(id:"+this.id+",x:"+this.x+",y:"+this.y+",text:"+this.text+")"};b.prototype.applyTextStyle=function(a){if(this.font)a.font=this.font;if(this.textAlign)a.textAlign=this.textAlign;if(this.textBaseline)a.textBaseline=this.textBaseline};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.applyStyle(a);this.applyTextStyle(a);this.filled?a.fillText(this.text,this.x,this.y,this.maxWidth):a.strokeText(this.text,this.x,this.y,this.maxWidth);
this.resetStyle(a)};b.prototype.inBounds=function(){return!1};d.StaticText=b})(NEngine);
(function(d){function b(a,b,g,f,e){this.__displayobject_init("Button");this.x=a;this.y=b;this.width=g;this.height=f;this.regX=g/2;this.regY=f/2;this.label=new d.StaticText(a+g/2,b+f/2,e,!0);this.label.textAlign="center";this.label.textBaseline="middle";this.cursor="pointer"}b.inheritsFrom(d.Rectangle);b.prototype.label=null;b.prototype._sizeDelta=3;b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height,this.label)};b.prototype.toString=function(){return this.name+"(id:"+this.id+
",x:"+this.x+",y:"+this.y+",w:"+this.width+",h:"+this.height+")"};b.prototype.onMouseOver=function(){this._sizeDelta&&(this.x-=this._sizeDelta,this.y-=this._sizeDelta,this.width+=this._sizeDelta*2,this.height+=this._sizeDelta*2)};b.prototype.onMouseOut=function(){this._sizeDelta&&(this.x+=this._sizeDelta,this.y+=this._sizeDelta,this.width-=this._sizeDelta*2,this.height-=this._sizeDelta*2)};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.applyStyle(a);this.filled?a.fillRect(this.x,
this.y,this.width,this.height):a.strokeRect(this.x,this.y,this.width,this.height);this.label.draw(a,b);this.resetStyle(a)};d.Button=b})(NEngine);
(function(d){function b(a,b,g,f,e,h){this.__displayobject_init("ImageButton");this.x=a;this.y=b;this.width=g;this.height=f;this.regX=g/2;this.regY=f/2;this.image=new d.Bitmap(e,a,b,g,f);this.imageMouseOver=new d.Bitmap(h,a,b,g,f);this.active_image=this.image;this.cursor="pointer"}b.inheritsFrom(d.Button);b.prototype.imageMouseOver=null;b.prototype.image=null;b.prototype.active_image=null;b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height,this.image,this.imageMouseOver)};
b.prototype.toString=function(){return this.name+"(id:"+this.id+",x:"+this.x+",y:"+this.y+",w:"+this.width+",h:"+this.height+")"};b.prototype.onMouseOver=function(){if(this._sizeDelta)this.x-=this._sizeDelta,this.y-=this._sizeDelta,this.width+=this._sizeDelta*2,this.height+=this._sizeDelta*2,this.active_image=this.imageMouseOver,this.image.x-=this._sizeDelta,this.image.y-=this._sizeDelta,this.image.width+=this._sizeDelta*2,this.image.height+=this._sizeDelta*2,this.imageMouseOver.x-=this._sizeDelta,
this.imageMouseOver.y-=this._sizeDelta,this.imageMouseOver.width+=this._sizeDelta*2,this.imageMouseOver.height+=this._sizeDelta*2};b.prototype.onMouseOut=function(){if(this._sizeDelta)this.x+=this._sizeDelta,this.y+=this._sizeDelta,this.width-=this._sizeDelta*2,this.height-=this._sizeDelta*2,this.active_image=this.image,this.image.x+=this._sizeDelta,this.image.y+=this._sizeDelta,this.image.width-=this._sizeDelta*2,this.image.height-=this._sizeDelta*2,this.imageMouseOver.x+=this._sizeDelta,this.imageMouseOver.y+=
this._sizeDelta,this.imageMouseOver.width-=this._sizeDelta*2,this.imageMouseOver.height-=this._sizeDelta*2};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.active_image.draw(a,b)};d.ImageButton=b})(NEngine);
(function(d){function b(a,b,g,f){this.__displayobject_init("Loader");this.x=a;this.y=b;this.width=g;this.height=f;this.regX=g/2;this.regY=f/2;this.label=new d.StaticText(a+g/2,b+f/2,"0%",!0);this.label.textAlign="center";this.label.textBaseline="middle";this.image=new d.Bitmap("images/big_loading.gif",a,b,g,f)}b.inheritsFrom(d.Shape);b.prototype.label=null;b.prototype.showPercentage=!1;b.prototype.ready=!1;b.prototype._children=[];b.prototype.numChildren=0;b.prototype.clone=function(){return new b(this.x,
this.y,this.width,this.height)};b.prototype.toString=function(){return this.name+"(id:"+this.id+",x:"+this.x+",y:"+this.y+",w:"+this.width+",h:"+this.height+")"};b.prototype.addChild=function(a){this.numChildren++;this._children.push(a)};b.prototype.removeChild=function(a){for(var b=0;b<this._children.length;b++)if(this._children[b].id==a.id)return a=this._children[b],this._children.splice(b,1),this.numChildren--,a;return null};b.prototype.isReady=function(){if(this.ready==!0)return!0;for(var a=0;a<
this._children.length;a++)if(typeof this._children[a].ready=="boolean"&&this._children[a].ready==!1)return!1;return this.ready=!0};b.prototype.progress=function(){for(var a=0,b=0;b<this._children.length;b++)typeof this._children[b].ready=="boolean"&&this._children[b].ready==!0&&++a;return a};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.applyStyle(a);this.image.draw(a,b);if(this.showPercentage&&this._children.length>0){var d=this.progress()/this._children.length;this.label.text=
Math.floor(d*100)+"%";this.label.draw(a,b)}else if(this.showPercentage&&this._children.length==0)this.label.text="100%",this.label.draw(a,b);this.resetStyle(a)};d.Loader=b})(NEngine);
(function(d){function b(a,b,g,f){this.__displayobject_init("TextField");this.x=a;this.y=b;this.width=g;this.height=f;this.regX=g/2;this.regY=f/2;this.label=new d.StaticText(a+5,b+f/2,"",!0);this.label.textAlign="left";this.label.textBaseline="middle"}b.inheritsFrom(d.Rectangle);b.prototype.label=null;b.prototype.isFlash=!1;b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height)};b.prototype.toString=function(){return this.name+"(id:"+this.id+",x:"+this.x+",y:"+this.y+",w:"+
this.width+",h:"+this.height+")"};b.prototype.onClick=function(){this.isFocus=!0;this.label.text="click"};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.applyStyle(a);a.strokeRect(this.x,this.y,this.width,this.height);this.label.draw(a,b);this.resetStyle(a)};d.TextField=b})(NEngine);
(function(d){function b(a,b,g,f,e,h,i){this.obj=a;this.prop=b;this.animation=g;this.begin=f;this.end=e;this.duration=h;this.useSecond=i;d.Clock.addListeners(this)}b.prototype._start=!1;b.prototype.obj=null;b.prototype.prop=null;b.prototype.animation=null;b.prototype.begin=0;b.prototype.end=0;b.prototype.duration=0;b.prototype.useSecond=0;b.prototype._originXValue=null;b.prototype._originYValue=null;b.prototype.clone=function(){return new b(this.obj,this.prop,this.animation,this.begin,this.end,this.duration,
this.useSecond)};b.prototype.toString=function(){return"(obj:"+this.obj+",prop:"+this.prop+",animation:"+this.animation+",begin:"+this.begin+",end:"+this.end+",duration:"+this.duration+",useSecond:"+this.useSecond+")"};b.prototype.tick=function(){if(this._start){var a;a=this.useSecond?Math.floor((this.end-this.begin)/(this.duration*(1E3/d.env.interval))):Math.floor((this.end-this.begin)/this.duration);if(this.animation=="regular")if(this.prop=="x"){if(a>0&&this.obj.x<this.end||a<0&&this.obj.x>this.end)this.obj.x+=
a}else if(this.prop=="y"&&(a>0&&this.obj.y<this.end||a<0&&this.obj.y>this.end))this.obj.y+=a}};b.prototype.start=function(){this._start=!0;this.obj.visible=!0;if(this.animation=="regular")if(this.prop=="x")this.obj.x=this.begin,this._originXValue=this.obj.x;else if(this.prop=="y")this.obj.y=this.begin,this._originYValue=this.obj.y};b.prototype.stop=function(){this._start=!1};b.prototype.reset=function(){if(this.animation=="regular")if(this.prop=="x")this.obj.x=this._originXValue;else if(this.prop==
"y")this.obj.y=this._originYValue};d.Tween=b})(NEngine);
(function(d){function b(a,b,g,f,e){this.__displayobject_init("NumberRectangle");this.x=a;this.y=b;this.width=g;this.height=f;this.regX=g/2;this.regY=f/2;this.number=new d.StaticText(a+g/2,b+f/2,this.id,!0);this.number.textAlign="center";this.number.textBaseline="middle";if(typeof e=="boolean")this.filled=e}b.inheritsFrom(d.Shape);b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height,this.filled)};b.prototype.toString=function(){return this.name+"(id:"+this.id+",x:"+this.x+
",y:"+this.y+",w:"+this.width+",h:"+this.height+")"};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.applyStyle(a);this.filled?a.fillRect(this.x,this.y,this.width,this.height):a.strokeRect(this.x,this.y,this.width,this.height);this.number.draw(a);this.resetStyle(a)};b.prototype.inBounds=function(a,b){return a>=this.x&&b>=this.y&&a<this.x+this.width&&b<this.y+this.height};d.NumberRectangle=b})(NEngine);
(function(d){function b(a,b,g,f,e){this.__displayobject_init("NumberBitmap");this.x=b;this.y=g;this.regX=f/2;this.regY=e/2;this.image=new Image;var h=this;this.image.onload=function(){h.ready=!0};if(f)this.width=f;if(e)this.height=e;this.image.src=a;this.number=new d.StaticText(b,g,this.id,!0)}b.inheritsFrom(d.Shape);b.prototype.image=null;b.prototype.ready=!1;b.prototype.number=null;b.prototype.clone=function(){return new b(this.image.src)};b.prototype.toString=function(){return this.name+"(id:"+
this.id+",imageurl:"+this.image.src+")"};b.prototype.draw=function(a,b){if(this.__draw(a,b))return!0;this.ready&&(this.width&&this.height?a.drawImage(this.image,this.x,this.y,this.width,this.height):a.drawImage(this.image,this.x,this.y));this.number.draw(a)};b.prototype.inBounds=function(a,b){var d=a>=this.x&&b>=this.y&&a<this.x+this.width&&b<this.y+this.height;if(this.stage&&d)return this.stage.graphics.ctx.getImageData(a,b,1,1).data[3]/255;return d};d.NumberBitmap=b})(NEngine);
